<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:ParcAuto_Web_App.ViewModels"
             x:Class="ParcAuto_Web_App.Views.ReservationDetailsPage"
             x:DataType="viewmodels:ReservationDetailsViewModel"
             Title="Reservation Details">
    
    <ScrollView Padding="20">
        <VerticalStackLayout Spacing="15">
            
            <Frame BorderColor="{StaticResource Primary}" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Reservation Details"
                           FontSize="24"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"/>
                    
                    <BoxView HeightRequest="1" Color="{StaticResource Primary}" Margin="0,10"/>
                    
                    <Grid ColumnDefinitions="120,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto" RowSpacing="8">
                        <Label Grid.Row="0" Grid.Column="0" Text="Vehicle:" FontAttributes="Bold"/>
                        <Label Grid.Row="0" Grid.Column="1" 
                               Text="{Binding Reservation.Vehicle.DisplayName}"
                               IsVisible="{Binding Reservation.Vehicle, Converter={StaticResource IsNotNullConverter}}"/>
                        <Label Grid.Row="0" Grid.Column="1" 
                               Text="N/A"
                               IsVisible="{Binding Reservation.Vehicle, Converter={StaticResource IsNullConverter}}"/>
                        
                        <Label Grid.Row="1" Grid.Column="0" Text="Driver:" FontAttributes="Bold"/>
                        <Label Grid.Row="1" Grid.Column="1" 
                               Text="{Binding Reservation.Driver.FullName}"
                               IsVisible="{Binding Reservation.Driver, Converter={StaticResource IsNotNullConverter}}"/>
                        <Label Grid.Row="1" Grid.Column="1" 
                               Text="N/A"
                               IsVisible="{Binding Reservation.Driver, Converter={StaticResource IsNullConverter}}"/>
                        
                        <Label Grid.Row="2" Grid.Column="0" Text="Start Date:" FontAttributes="Bold"/>
                        <Label Grid.Row="2" Grid.Column="1" Text="{Binding Reservation.StartDate, StringFormat='{0:MMM dd, yyyy}'}"/>
                        
                        <Label Grid.Row="3" Grid.Column="0" Text="End Date:" FontAttributes="Bold"/>
                        <Label Grid.Row="3" Grid.Column="1" Text="{Binding Reservation.EndDate, StringFormat='{0:MMM dd, yyyy}'}"/>
                        
                        <Label Grid.Row="4" Grid.Column="0" Text="Purpose:" FontAttributes="Bold"/>
                        <Label Grid.Row="4" Grid.Column="1" Text="{Binding Reservation.Purpose}"/>
                        
                        <Label Grid.Row="5" Grid.Column="0" Text="Status:" FontAttributes="Bold"/>
                        <Label Grid.Row="5" Grid.Column="1" 
                               Text="{Binding Reservation.Status}"
                               TextColor="{StaticResource Primary}"
                               FontAttributes="Bold"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons -->
            <Button Text="Edit"
                    Command="{Binding EditReservationCommand}"
                    BackgroundColor="{StaticResource Primary}"
                    TextColor="White"
                    IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"/>

            <Button Text="Delete"
                    Command="{Binding DeleteReservationCommand}"
                    BackgroundColor="Red"
                    TextColor="White"
                    IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"/>

            <!-- Loading Indicator -->
            <ActivityIndicator IsRunning="{Binding IsBusy}"
                              IsVisible="{Binding IsBusy}"
                              HorizontalOptions="Center"
                              Color="{StaticResource Primary}"/>
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
